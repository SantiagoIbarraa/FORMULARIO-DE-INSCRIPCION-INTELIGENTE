<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro - Liga Nacional de Rob칩tica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="dark-mode">
    <!-- Switch para cambio de tema con iconos mejorados -->
    <div class="theme-switch-container">
        <div class="theme-icon"><i class="fas fa-moon"></i></div>
        <label class="theme-switch">
            <input type="checkbox" id="theme-toggle">
            <span class="slider"></span>
        </label>
        <div class="theme-icon"><i class="fas fa-sun"></i></div>
    </div>
    
    <div class="container">
        <h1>Registro para el Campeonato LNR <i class="fas fa-robot"></i></h1>
        
        <form id="lnr-form">
            <!-- Datos del Equipo -->
            <div class="form-group">
                <label for="nombre-equipo"><i class="fas fa-users"></i> Nombre del Equipo</label>
                <input type="text" id="nombre-equipo" name="nombre-equipo" required maxlength="30" placeholder="Ingresa un nombre creativo para tu equipo">
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Nombre v치lido</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> El nombre es obligatorio (m치x. 30 caracteres)</div>
            </div>

            <div class="form-group">
                <label for="institucion"><i class="fas fa-school"></i> Escuela/Instituci칩n</label>
                <select id="institucion" name="institucion" required>
                    <option value="">Seleccione una instituci칩n</option>
                    <option value="EEST N.췈 1 - Eduardo Ader">EEST N.췈 1 - Eduardo Ader</option>
                    <option value="EEST N.췈 2">EEST N.췈 2</option>
                    <option value="EEST N.췈 3">EEST N.췈 3</option>
                    <option value="EEST N.췈 4">EEST N.췈 4</option>
                    <option value="otro">Otra Instituci칩n</option>
                </select>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Instituci칩n seleccionada</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Seleccione una instituci칩n</div>
            </div>

            <div id="otra-institucion-container" class="form-group" style="display: none;">
                <label for="otra-institucion"><i class="fas fa-building"></i> Nombre de la Instituci칩n</label>
                <input type="text" id="otra-institucion" name="otra-institucion" placeholder="Especifique el nombre de su instituci칩n">
            </div>

            <div class="form-group">
                <label for="email"><i class="fas fa-envelope"></i> Email del Responsable</label>
                <input type="email" id="email" name="email" required placeholder="responsable@institucion.edu.ar">
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Email v치lido</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Ingrese un email v치lido</div>
            </div>

            <div class="form-group">
                <label for="estudiantes"><i class="fas fa-user-graduate"></i> Datos de Estudiantes del Equipo</label>
                <textarea id="estudiantes" name="estudiantes" rows="3" required placeholder="Nombre, Apellido y DNI de cada estudiante (uno por l칤nea)"></textarea>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Datos ingresados correctamente</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Ingrese los datos de los estudiantes</div>
            </div>

            <div class="form-group">
                <label for="foto-perfil"><i class="fas fa-camera"></i> Foto de Perfil del Equipo</label>
                <div class="file-upload">
                    <label for="foto-perfil" class="file-upload-label">
                        <i class="fas fa-cloud-upload-alt"></i> Seleccionar Foto (JPG/PNG, m치x. 2MB)
                    </label>
                    <input type="file" id="foto-perfil" name="foto-perfil" accept=".jpg,.jpeg,.png" required>
                </div>
                <div class="foto-preview" id="foto
                -preview-container">
                    <img id="foto-preview" src="" alt="Vista previa de la foto">
                </div>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Foto v치lida</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Seleccione una foto v치lida (JPG/PNG, m치x. 2MB)</div>
            </div>

            <div class="separator"></div>

            <!-- Categor칤as de Competencia con tooltips mejorados -->
            <div class="form-group">
                <label><i class="fas fa-gamepad"></i> Categor칤as de Competencia</label>
                <p style="font-size: 13px; color: var(--text-color); opacity: 0.7; margin-bottom: 15px;">Seleccione al menos una categor칤a para participar:</p>
                <div class="categorias-container">
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-sumo" name="categorias" value="sumo" class="categoria-checkbox">
                        <label for="categoria-sumo" class="categoria-label">Sumo</label>
                        <span class="tooltip-text">Competencia de robots para empujar oponentes fuera del dohyo. M치s potencia, m치s estrategia.</span>
                    </div>
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-minisumo" name="categorias" value="minisumo" class="categoria-checkbox">
                        <label for="categoria-minisumo" class="categoria-label">Minisumo</label>
                        <span class="tooltip-text">Versi칩n reducida del robot de sumo. Desaf칤o t칠cnico en tama침o compacto.</span>
                    </div>
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-carrera" name="categorias" value="carrera" class="categoria-checkbox">
                        <label for="categoria-carrera" class="categoria-label">Carrera</label>
                        <span class="tooltip-text">Robot para seguir trayecto marcado en el menor tiempo posible. 춰Velocidad y precisi칩n!</span>
                    </div>
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-futbol" name="categorias" value="futbol" class="categoria-checkbox">
                        <label for="categoria-futbol" class="categoria-label">F칰tbol</label>
                        <span class="tooltip-text">Robot para jugar f칰tbol en equipos. Coordinaci칩n y trabajo en equipo.</span>
                    </div>
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-laberinto" name="categorias" value="laberinto" class="categoria-checkbox">
                        <label for="categoria-laberinto" class="categoria-label">Laberinto</label>
                        <span class="tooltip-text">Robot para resolver laberintos de forma aut칩noma. Algoritmos e inteligencia artificial aplicada.</span>
                    </div>
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-microsumo" name="categorias" value="microsumo" class="categoria-checkbox">
                        <label for="categoria-microsumo" class="categoria-label">Microsumo</label>
                        <span class="tooltip-text">Versi칩n micro del robot de sumo. El gran desaf칤o en peque침a escala.</span>
                    </div>
                    <!-- Nueva categor칤a a침adida -->
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-drones" name="categorias" value="drones" class="categoria-checkbox">
                        <label for="categoria-drones" class="categoria-label">Drones</label>
                        <span class="tooltip-text">Competencia de drones con obst치culos y pruebas de destreza. 춰Nueva categor칤a 2025!</span>
                    </div>
                    <!-- Nueva categor칤a a침adida -->
                    <div class="categoria-item tooltip">
                        <input type="checkbox" id="categoria-rescate" name="categorias" value="rescate" class="categoria-checkbox">
                        <label for="categoria-rescate" class="categoria-label">Rescate</label>
                        <span class="tooltip-text">Robot de rescate para identificar y salvar objetivos. Desaf칤o de alta complejidad.</span>
                    </div>
                </div>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Categor칤as seleccionadas correctamente</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Seleccione al menos una categor칤a</div>
            </div>

            <div class="separator"></div>

            <!-- Documentaci칩n T칠cnica mejorada -->
            <div class="form-group">
                <label for="diseno-robot"><i class="fas fa-drafting-compass"></i> Dise침o del Robot</label>
                <div class="file-upload">
                    <label for="diseno-robot" class="file-upload-label">
                        <i class="fas fa-cloud-upload-alt"></i> Subir Archivo (PDF/JPG/PNG, m치x. 5MB)
                    </label>
                    <input type="file" id="diseno-robot" name="diseno-robot" accept=".pdf,.jpg,.jpeg,.png" required>
                </div>
                <div class="file-preview" id="diseno-preview"></div>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Archivo subido correctamente</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Seleccione un archivo v치lido (PDF/JPG/PNG, m치x. 5MB)</div>
            </div>

            <div id="certificado-container" class="form-group" style="display: none;">
                <label for="certificado"><i class="fas fa-shield-alt"></i> Certificado de Seguridad</label>
                <div class="tooltip" style="display: inline-block; margin-left: 10px;">
                    <i class="fas fa-info-circle" style="color: var(--accent-color);"></i>
                    <span class="tooltip-text">Este certificado es obligatorio para robots de categor칤as de combate, garantizando que cumplen con las normativas de seguridad LNR-2025</span>
                </div>
                <div class="file-upload">
                    <label for="certificado" class="file-upload-label">
                        <i class="fas fa-cloud-upload-alt"></i> Subir Certificado (PDF/JPG/PNG, m치x. 2MB)
                    </label>
                    <input type="file" id="certificado" name="certificado" accept=".pdf,.jpg,.jpeg,.png">
                </div>
                <div class="file-preview" id="certificado-preview"></div>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Certificado v치lido</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Certificado de seguridad obligatorio para Sumo/Minisumo</div>
            </div>

            <!-- Nueva secci칩n a침adida: Informaci칩n de contacto de emergencia -->
            <div class="form-group">
                <label for="contacto-emergencia"><i class="fas fa-phone-alt"></i> Contacto de Emergencia</label>
                <input type="tel" id="contacto-emergencia" name="contacto-emergencia" required pattern="[0-9]{10}" placeholder="Tel칠fono m칩vil (10 d칤gitos)">
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> N칰mero v치lido</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Ingrese un n칰mero de tel칠fono v치lido (10 d칤gitos)</div>
            </div>

            <!-- Nueva secci칩n a침adida: Fecha de competencia preferida -->
            <div class="form-group">
                <label for="fecha-preferida"><i class="fas fa-calendar-alt"></i> Fecha Preferida</label>
                <select id="fecha-preferida" name="fecha-preferida" required>
                    <option value="">Seleccione una fecha</option>
                    <option value="2025-05-15">15 de Mayo 2025</option>
                    <option value="2025-06-20">20 de Junio 2025</option>
                    <option value="2025-07-10">10 de Julio 2025</option>
                    <option value="cualquiera">Cualquier fecha disponible</option>
                </select>
                <div class="valid-feedback"><i class="fas fa-check-circle"></i> Fecha seleccionada</div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Seleccione una fecha</div>
            </div>

            <!-- Secci칩n de t칠rminos y condiciones mejorada -->
            <div class="form-group">
                <div class="categoria-item">
                    <input type="checkbox" id="acepto-reglas" name="acepto-reglas" required class="categoria-checkbox">
                    <label for="acepto-reglas" class="categoria-label">Acepto las reglas del campeonato LNR 2025</label>
                </div>
                <div class="invalid-feedback"><i class="fas fa-exclamation-circle"></i> Debe aceptar las reglas para continuar</div>
            </div>

            <!-- Nueva secci칩n: Newsletter -->
            <div class="form-group">
                <div class="categoria-item">
                    <input type="checkbox" id="newsletter" name="newsletter" class="categoria-checkbox">
                    <label for="newsletter" class="categoria-label">Deseo recibir actualizaciones sobre eventos futuros</label>
                </div>
            </div>

            <div class="buttons-container">
                <button type="submit" id="submit-btn" disabled>
                    <i class="fas fa-rocket"></i> Registrar Equipo
                </button>
                <button type="reset" id="reset-btn">
                    <i class="fas fa-broom"></i> Borrar
                </button>
            </div>
        </form>

        <div class="contador-container">
            <p>Equipos registrados para la LNR 2025: <span id="contador-equipos">0</span></p>
        </div>
    </div>

    <!-- Script para funcionalidad mejorada -->
    <script>
        // Funci칩n para cambiar el tema con animaci칩n mejorada
        function toggleTheme() {
            const body = document.body;
            
            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
                document.querySelector('.fa-moon').style.opacity = '0.3';
                document.querySelector('.fa-sun').style.opacity = '1';
            } else {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
                document.querySelector('.fa-moon').style.opacity = '1';
                document.querySelector('.fa-sun').style.opacity = '0.3';
            }
        }

        // Aplicar el tema guardado o usar el predeterminado con efecto visual
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const savedTheme = localStorage.getItem('theme') || 'dark';
            
            if (savedTheme === 'light') {
                document.body.classList.remove('dark-mode');
                document.body.classList.add('light-mode');
                themeToggle.checked = true;
                document.querySelector('.fa-moon').style.opacity = '0.3';
                document.querySelector('.fa-sun').style.opacity = '1';
            } else {
                document.querySelector('.fa-moon').style.opacity = '1';
                document.querySelector('.fa-sun').style.opacity = '0.3';
            }
            
            themeToggle.addEventListener('change', toggleTheme);
        });

        // Variables globales
        const form = document.getElementById('lnr-form');
        const submitBtn = document.getElementById('submit-btn');
        const resetBtn = document.getElementById('reset-btn');
        const institucionSelect = document.getElementById('institucion');
        const otraInstitucionContainer = document.getElementById('otra-institucion-container');
        const otraInstitucion = document.getElementById('otra-institucion');
        const categorias = document.querySelectorAll('input[name="categorias"]');
        const certificadoContainer = document.getElementById('certificado-container');
        const certificadoInput = document.getElementById('certificado');
        const contadorEquipos = document.getElementById('contador-equipos');
        
        // Cargar el contador desde localStorage con animaci칩n
        let equiposRegistrados = parseInt(localStorage.getItem('equiposRegistrados')) || 0;
        contadorEquipos.textContent = equiposRegistrados;

        // Funci칩n para validar el nombre del equipo
        function validarNombreEquipo() {
            const nombreEquipoInput = document.getElementById('nombre-equipo');
            const valor = nombreEquipoInput.value.trim();
            const esValido = valor.length > 0 && valor.length <= 30;
            
            nombreEquipoInput.classList.toggle('is-valid', esValido);
            nombreEquipoInput.classList.toggle('is-invalid', !esValido);
            nombreEquipoInput.nextElementSibling.style.display = esValido ? 'block' : 'none';
            nombreEquipoInput.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Funci칩n para validar la instituci칩n
        function validarInstitucion() {
            const esValido = institucionSelect.value !== '';
            
            institucionSelect.classList.toggle('is-valid', esValido);
            institucionSelect.classList.toggle('is-invalid', !esValido);
            institucionSelect.nextElementSibling.style.display = esValido ? 'block' : 'none';
            institucionSelect.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            // Mostrar/ocultar campo para otra instituci칩n con animaci칩n
            if (institucionSelect.value === 'otro') {
                otraInstitucionContainer.style.display = 'block';
                setTimeout(() => {
                    otraInstitucionContainer.style.opacity = 1;
                    otraInstitucionContainer.style.transform = 'translateY(0)';
                }, 10);
            } else {
                otraInstitucionContainer.style.opacity = 0;
                otraInstitucionContainer.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    otraInstitucionContainer.style.display = 'none';
                }, 300);
            }
            
            return esValido;
        }

        // Funci칩n para validar el email con regex mejorado
        function validarEmail() {
            const emailInput = document.getElementById('email');
            const valor = emailInput.value.trim();
            const regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            const esValido = regex.test(valor);
            
            emailInput.classList.toggle('is-valid', esValido);
            emailInput.classList.toggle('is-invalid', !esValido);
            emailInput.nextElementSibling.style.display = esValido ? 'block' : 'none';
            emailInput.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Funci칩n para validar los datos de estudiantes
        function validarEstudiantes() {
            const estudiantesInput = document.getElementById('estudiantes');
            const valor = estudiantesInput.value.trim();
            const esValido = valor.length > 0;
            
            estudiantesInput.classList.toggle('is-valid', esValido);
            estudiantesInput.classList.toggle('is-invalid', !esValido);
            estudiantesInput.nextElementSibling.style.display = esValido ? 'block' : 'none';
            estudiantesInput.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Funci칩n para validar la foto de perfil con preview mejorada
        function validarFotoPerfil() {
            const fotoInput = document.getElementById('foto-perfil');
            const fotoPreviewContainer = document.getElementById('foto-preview-container');
            const fotoPreview = document.getElementById('foto-preview');
            
            if (!fotoInput.files || !fotoInput.files[0]) {
                fotoInput.parentElement.nextElementSibling.nextElementSibling.style.display = 'none';
                fotoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = 'block';
                fotoPreviewContainer.style.display = 'none';
                return false;
            }
            
            const archivo = fotoInput.files[0];
            const tiposPermitidos = ['image/jpeg', 'image/jpg', 'image/png'];
            const tamanoMaximo = 2 * 1024 * 1024; // 2MB
            
            const esValidoTipo = tiposPermitidos.includes(archivo.type);
            const esValidoTamano = archivo.size <= tamanoMaximo;
            const esValido = esValidoTipo && esValidoTamano;
            
            fotoInput.parentElement.nextElementSibling.nextElementSibling.style.display = esValido ? 'block' : 'none';
            fotoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            // Previsualizar la imagen con animaci칩n si es v치lida
            if (esValido) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    fotoPreview.src = e.target.result;
                    fotoPreviewContainer.style.display = 'block';
                    setTimeout(() => {
                        fotoPreviewContainer.style.opacity = 1;
                        fotoPreviewContainer.style.transform = 'scale(1)';
                    }, 10);
                };
                reader.readAsDataURL(archivo);
            } else {
                fotoPreviewContainer.style.opacity = 0;
                fotoPreviewContainer.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    fotoPreviewContainer.style.display = 'none';
                }, 300);
            }
            
            return esValido;
        }

        // Funci칩n para validar las categor칤as con efectos visuales
        function validarCategorias() {
            const categoriasSeleccionadas = document.querySelectorAll('input[name="categorias"]:checked');
            const esValido = categoriasSeleccionadas.length > 0;
            
            const contenedorCategorias = document.querySelector('.categorias-container').parentElement;
            contenedorCategorias.querySelector('.valid-feedback').style.display = esValido ? 'block' : 'none';
            contenedorCategorias.querySelector('.invalid-feedback').style.display = !esValido ? 'block' : 'none';
            
            // Mostrar/ocultar campo de certificado para sumo/minisumo con animaci칩n
            const requiereCertificado = Array.from(categoriasSeleccionadas).some(
                cat => cat.value === 'sumo' || cat.value === 'minisumo' || cat.value === 'microsumo'
            );
            
            if (requiereCertificado) {
                certificadoContainer.style.display = 'block';
                setTimeout(() => {
                    certificadoContainer.style.opacity = 1;
                    certificadoContainer.style.transform = 'translateY(0)';
                }, 10);
            } else {
                certificadoContainer.style.opacity = 0;
                certificadoContainer.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    certificadoContainer.style.display = 'none';
                }, 300);
            }
            
            certificadoInput.required = requiereCertificado;
            
            return esValido;
        }

        // Funci칩n para validar el dise침o del robot con previsualizaci칩n mejorada
        function validarDisenoRobot() {
            const disenoInput = document.getElementById('diseno-robot');
            const disenoPreview = document.getElementById('diseno-preview');
            
            if (!disenoInput.files || !disenoInput.files[0]) {
                disenoInput.parentElement.nextElementSibling.nextElementSibling.style.display = 'none';
                disenoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = 'block';
                return false;
            }
            
            const archivo = disenoInput.files[0];
            const tiposPermitidos = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
            const tamanoMaximo = 5 * 1024 * 1024; // 5MB
            
            const esValidoTipo = tiposPermitidos.includes(archivo.type);
            const esValidoTamano = archivo.size <= tamanoMaximo;
            const esValido = esValidoTipo && esValidoTamano;
            
            disenoInput.parentElement.nextElementSibling.nextElementSibling.style.display = esValido ? 'block' : 'none';
            disenoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            // Previsualizar el archivo con animaci칩n
            if (esValido) {
                disenoPreview.innerHTML = '';
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                
                if (archivo.type === 'application/pdf') {
                    previewItem.innerHTML = `<i class="fas fa-file-pdf" style="color: #ff3e3e; font-size: 16px;"></i>
                                            <span>${archivo.name} (${Math.round(archivo.size / 1024)} KB)</span>`;
                } else {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.className = 'img-preview';
                        img.src = e.target.result;
                        previewItem.appendChild(img);
                        previewItem.appendChild(document.createElement('span')).textContent = `${archivo.name} (${Math.round(archivo.size / 1024)} KB)`;
                    };
                    reader.readAsDataURL(archivo);
                }
                
                // Agregar con animaci칩n
                setTimeout(() => {
                    disenoPreview.appendChild(previewItem);
                    previewItem.style.animation = 'fadeInUp 0.5s ease forwards';
                }, 100);
            } else {
                disenoPreview.innerHTML = '';
            }
            
            return esValido;
        }

        // Funci칩n para validar el certificado de seguridad
        function validarCertificado() {
            if (certificadoContainer.style.display === 'none') {
                return true; // No es necesario validar si no est치 visible
            }
            
            const certificadoInput = document.getElementById('certificado');
            const certificadoPreview = document.getElementById('certificado-preview');
            
            if (!certificadoInput.files || !certificadoInput.files[0]) {
                certificadoInput.parentElement.nextElementSibling.nextElementSibling.style.display = 'none';
                certificadoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = 'block';
                return false;
            }
            
            const archivo = certificadoInput.files[0];
            const tiposPermitidos = ['application/pdf', 'image/jpeg', 'image/jpg', 'image/png'];
            const tamanoMaximo = 2 * 1024 * 1024; // 2MB
            
            const esValidoTipo = tiposPermitidos.includes(archivo.type);
            const esValidoTamano = archivo.size <= tamanoMaximo;
            const esValido = esValidoTipo && esValidoTamano;
            
            certificadoInput.parentElement.nextElementSibling.nextElementSibling.style.display = esValido ? 'block' : 'none';
            certificadoInput.parentElement.nextElementSibling.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            // Previsualizar el archivo con animaci칩n
            if (esValido) {
                certificadoPreview.innerHTML = '';
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                
                if (archivo.type === 'application/pdf') {
                    previewItem.innerHTML = `<i class="fas fa-file-pdf" style="color: #ff3e3e; font-size: 16px;"></i>
                                            <span>${archivo.name} (${Math.round(archivo.size / 1024)} KB)</span>`;
                } else {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.className = 'img-preview';
                        img.src = e.target.result;
                        previewItem.appendChild(img);
                        previewItem.appendChild(document.createElement('span')).textContent = `${archivo.name} (${Math.round(archivo.size / 1024)} KB)`;
                    };
                    reader.readAsDataURL(archivo);
                }
                
                // Agregar con animaci칩n
                setTimeout(() => {
                    certificadoPreview.appendChild(previewItem);
                    previewItem.style.animation = 'fadeInUp 0.5s ease forwards';
                }, 100);
            } else {
                certificadoPreview.innerHTML = '';
            }
            
            return esValido;
        }

        // Validar contacto de emergencia (nuevo campo)
        function validarContactoEmergencia() {
            const contactoInput = document.getElementById('contacto-emergencia');
            const valor = contactoInput.value.trim();
            const regex = /^[0-9]{10}$/;
            const esValido = regex.test(valor);
            
            contactoInput.classList.toggle('is-valid', esValido);
            contactoInput.classList.toggle('is-invalid', !esValido);
            contactoInput.nextElementSibling.style.display = esValido ? 'block' : 'none';
            contactoInput.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Validar fecha preferida (nuevo campo)
        function validarFecha() {
            const fechaInput = document.getElementById('fecha-preferida');
            const esValido = fechaInput.value !== '';
            
            fechaInput.classList.toggle('is-valid', esValido);
            fechaInput.classList.toggle('is-invalid', !esValido);
            fechaInput.nextElementSibling.style.display = esValido ? 'block' : 'none';
            fechaInput.nextElementSibling.nextElementSibling.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Funci칩n para comprobar si se aceptan las reglas
        function validarReglas() {
            const reglasCheckbox = document.getElementById('acepto-reglas');
            const esValido = reglasCheckbox.checked;
            
            const invalidFeedback = reglasCheckbox.parentElement.nextElementSibling;
            invalidFeedback.style.display = !esValido ? 'block' : 'none';
            
            return esValido;
        }

        // Funci칩n para validar todo el formulario y activar/desactivar bot칩n
        function validarFormulario() {
            const esValidoNombre = validarNombreEquipo();
            const esValidaInstitucion = validarInstitucion();
            const esValidoEmail = validarEmail();
            const esValidoEstudiantes = validarEstudiantes();
            const esValidaFoto = validarFotoPerfil();
            const esValidasCategorias = validarCategorias();
            const esValidoDiseno = validarDisenoRobot();
            const esValidoCertificado = validarCertificado();
            const esValidoContacto = validarContactoEmergencia();
            const esValidaFecha = validarFecha();
            const reglasAceptadas = validarReglas();
            
            const formularioValido = esValidoNombre && 
                                    esValidaInstitucion && 
                                    esValidoEmail && 
                                    esValidoEstudiantes && 
                                    esValidaFoto && 
                                    esValidasCategorias && 
                                    esValidoDiseno && 
                                    esValidoCertificado && 
                                    esValidoContacto && 
                                    esValidaFecha && 
                                    reglasAceptadas;
            
            submitBtn.disabled = !formularioValido;
            
            // Efecto visual para el bot칩n
            if (formularioValido) {
                submitBtn.classList.add('ready');
                submitBtn.style.animation = 'pulse 2s infinite';
            } else {
                submitBtn.classList.remove('ready');
                submitBtn.style.animation = 'none';
            }
            
            return formularioValido;
        }

        // Eventos de validaci칩n en tiempo real
        document.getElementById('nombre-equipo').addEventListener('input', function() {
            validarNombreEquipo();
            validarFormulario();
        });
        
        institucionSelect.addEventListener('change', function() {
            validarInstitucion();
            validarFormulario();
        });

    // Campos faltantes que deben activar la validaci칩n del formulario
    document.getElementById('email').addEventListener('input', validarFormulario);
    document.getElementById('estudiantes').addEventListener('input', validarFormulario);
    document.getElementById('foto-perfil').addEventListener('change', validarFormulario);
    document.getElementById('diseno-robot').addEventListener('change', validarFormulario);
    document.getElementById('certificado').addEventListener('change', validarFormulario);
    document.getElementById('contacto-emergencia').addEventListener('input', validarFormulario);
    document.getElementById('fecha-preferida').addEventListener('change', validarFormulario);
    document.getElementById('acepto-reglas').addEventListener('change', validarFormulario);

    // Validar categor칤as (y certificado) cuando cambian
    document.querySelectorAll('input[name="categorias"]').forEach(cat => {
        cat.addEventListener('change', () => {
            validarCategorias();
            validarFormulario();
        });
    });

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        if (!validarFormulario()) return;

        // Mostrar estado de env칤o
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
        submitBtn.disabled = true;

        // Simular env칤o exitoso con delay
        setTimeout(() => {
            // Mensaje de 칠xito
            alert("游꿀 춰El equipo fue registrado exitosamente!");

            // Incrementar contador
            equiposRegistrados += 1;
            localStorage.setItem('equiposRegistrados', equiposRegistrados);
            contadorEquipos.textContent = equiposRegistrados;

            // Resetear formulario
            form.reset();
            document.querySelectorAll('.is-valid, .is-invalid').forEach(el => {
                el.classList.remove('is-valid', 'is-invalid');
            });

            // Ocultar previews y campos condicionales
            document.getElementById('foto-preview-container').style.display = 'none';
            document.getElementById('diseno-preview').innerHTML = '';
            document.getElementById('certificado-preview').innerHTML = '';
            certificadoContainer.style.display = 'none';
            otraInstitucionContainer.style.display = 'none';

            // Restaurar bot칩n
            submitBtn.innerHTML = '<i class="fas fa-rocket"></i> Registrar Equipo';
            submitBtn.disabled = true;
            submitBtn.classList.remove('ready');
        }, 2000);
    });
</script>
